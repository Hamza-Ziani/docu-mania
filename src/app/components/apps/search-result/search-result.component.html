
<ng-container *ngIf="detailsFile; else noResult">
    <app-file-exporter></app-file-exporter>
</ng-container>

<ng-template #noResult>
    <div class="absolute inset-0 flex flex-col min-w-0 overflow-hidden">
        <mat-drawer-container class="flex-auto h-full bg-card dark:bg-transparent">
            <mat-drawer-content class="flex flex-col bg-gray-100 dark:bg-transparent">
                <!-- Main -->
                <div class="flex flex-col flex-auto">

<!-- Header -->
<div class="flex items-center justify-between  sm:p-1 border-b bg-card dark:bg-transparent">
    <div class="flex items-center">
        <!-- Button with Dark Mode Color -->
        <button  mat-flat-button class="bg-accent text-on-accent mr-2">
            <mat-icon class="icon-size-5" svgIcon="feather:corner-up-left"></mat-icon>
            <ng-container *transloco="let t">
                <span class="ml-2 hidden sm:inline">{{t("reteur")}}</span>
            </ng-container>
        </button>

        <!-- Gradient Vertical Separator -->
        <div class="mr-2 h-8 w-0.5 bg-gradient-to-t from-blue-500 to-blue-700"></div>

        <!-- Title (Responsive text size) -->
        <div class="text-sm sm:text-lg md:text-xl font-extrabold tracking-tight leading-none">
            Courriers Frequentes :
        </div>

    </div>

    <!-- Right Section: Folders/Files Info or Breadcrumbs -->
    <div
        class="flex  sm:flex-row items-start sm:items-center font-normal text-secondary text-sm sm:text-base">
        <ng-container>
            <div class="mr-2">Total : 4</div>
        </ng-container>
        <div class="flex items-center space-x-1">
            <button *ngIf="!isMobileView" (click)="showTableView()">
                <i class="fa-solid fa-list icon-size-4 sm:icon-size-5"
                   [ngClass]="{'primary-color': isTableViewActive}"
                   title="Table View"></i>
            </button>
            <button (click)="showMosaicView()" >
                <i class="fa-brands fa-microsoft icon-size-4 sm:icon-size-5"
                   [ngClass]="{'primary-color': isMosaicViewActive}"
                   title="Mosaic View"></i>
            </button>
        </div>
    </div>
</div>
<!-- End Header -->

                    <!-- Line separator -->
                    <div class="w-full h-1 border-t-1" style="background: linear-gradient(to right, #ffc107, #007bff);">
                    </div>
                    <!-- Results frequentes Mosaique -->
                    <mat-tab-group class="sm:px-2" mat-stretch-tabs="false" [animationDuration]="'0'" >
                        <mat-tab label="Results frequentes Mosaique" *ngIf="!showTable">
                            <ng-template matTabContent>
                                <ng-container *ngIf="files1.length > 0; else NoData">
                                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-7 gap-3 w-full min-w-0">
                                        <div *ngFor="let file of files1"
                                            class="flex flex-col flex-auto p-4 bg-card shadow h-35 rounded-2xl overflow-hidden">
                                            <div class="flex items-start justify-between">
                                                <div class="text-lg font-medium tracking-tight leading-6 truncate">
                                                    {{ file.name }}</div>
                                                <div class="ml-2 -mt-2 -mr-3">
                                                    <button mat-icon-button [matMenuTriggerFor]="folderMenu">
                                                        <i class="fa-solid fa-ellipsis-vertical icon-size-4"></i>

                                                    </button>
                                                    <mat-menu #folderMenu="matMenu">
                                                        <button mat-menu-item (click)="openDialog()">
                                                            <i class="fa-solid fa-square-pen icon-size-4 primary-color"></i>
                                                            Update
                                                        </button>
                                                        <button mat-menu-item (click)="openConfirmationDialog()">
                                                            <i class="fa-solid fa-trash icon-size-4 red-color"></i> Delete
                                                        </button>
                                                        <button mat-menu-item>
                                                            <i class="fa-solid fa-star icon-size-4 gold-color"></i>
                                                            Favorites
                                                        </button>
                                                    </mat-menu>
                                                </div>
                                            </div>
                                            <div class="flex flex-col items-center">
                                                <div
                                                    class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-blue-500 icon-container">
                                                    <i class="fa-solid fa-envelope gold-color"></i>
                                                </div>
                                                <div class="flex items-center justify-between mt-2 w-full text-secondary">
                                                    <div class="text-md font-medium truncate">Date: {{ file.date }}</div>
                                                    <div class="ml-2">
                                                        <button type="button" (click)="openDetailsDrawer(1)">
                                                            <i class="fa-solid fa-circle-exclamation icon-color"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                            </ng-template>
                        </mat-tab>
                    </mat-tab-group>

                    <!-- Results frequentes Table -->
                    <mat-tab-group class="sm:px-2" mat-stretch-tabs="false" [animationDuration]="'0'" >
                        <mat-tab label="Results fréquentes" *ngIf="showTable">
                            <ng-template matTabContent>
                                <div class="flex justify-center items-center">
                                    <ng-container>
                                        <div class="mb-4">
                                            <!-- Table -->
                                            <table class="w-90 table" mat-table [dataSource]="dataSource" matSort>

                                                <!-- Ouvrir -->
                                                <ng-container matColumnDef="ouvrir">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Ouvrir</th>
                                                    <td mat-cell *matCellDef="let element">
                                                        <button (click)="detailsFile = !detailsFile">
                                                            <i
                                                                class="fa-solid fa-envelope-open primary-color icon-size-4">
                                                            </i>
                                                        </button>
                                                        <!-- <button (click)="openFileDialog(element.id)">
                                                            <i
                                                                class="fa-solid fa-envelope-open primary-color icon-size-4"></i>
                                                        </button> -->
                                                    </td>
                                                </ng-container>
                                                <!-- Référence -->
                                                <ng-container matColumnDef="reference">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Référence</th>
                                                    <td mat-cell *matCellDef="let element">{{ element.reference }}</td>
                                                </ng-container>
                                                <!-- Date d'enregistrement -->
                                                <ng-container matColumnDef="registrationDate">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Date
                                                        d'enregistrement</th>
                                                    <td mat-cell *matCellDef="let element">{{ element.registrationDate }}
                                                    </td>
                                                </ng-container>
                                                <!-- Date réception / Date d'établissement -->
                                                <ng-container matColumnDef="receptionDate">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Date
                                                        d'établissement</th>
                                                    <td mat-cell *matCellDef="let element">{{ element.receptionDate }}</td>
                                                </ng-container>
                                                <!-- Type -->
                                                <ng-container matColumnDef="type">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Type</th>
                                                    <td mat-cell *matCellDef="let element">{{ element.type }}</td>
                                                </ng-container>
                                                <!-- Catégorie -->
                                                <ng-container matColumnDef="category">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Catégorie</th>
                                                    <td mat-cell *matCellDef="let element">{{ element.category }}</td>
                                                </ng-container>
                                                <!-- Destinataire(s) -->
                                                <ng-container matColumnDef="sender">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Destinataire(s)
                                                    </th>
                                                    <td mat-cell *matCellDef="let element">{{ element.sender }}</td>
                                                </ng-container>
                                                <!-- Objet -->
                                                <ng-container matColumnDef="subject">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Objet</th>
                                                    <td mat-cell *matCellDef="let element">{{ element.subject }}</td>
                                                </ng-container>
                                                <!-- Propriétaire -->
                                                <ng-container matColumnDef="owner">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Propriétaire</th>
                                                    <td mat-cell *matCellDef="let element">{{ element.owner }}</td>
                                                </ng-container>
                                                <!-- Actions -->
                                                <ng-container matColumnDef="actions">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Actions</th>
                                                    <td mat-cell *matCellDef="let element" class="text-center">
                                                        <div class="ml-6 -mt-2 -mr-3">
                                                            <button mat-icon-button [matMenuTriggerFor]="folderMenu"
                                                                aria-label="Actions">
                                                                <i class="fa-solid fa-ellipsis icon-size-4"></i>

                                                            </button>
                                                            <mat-menu #folderMenu="matMenu" aria-label="Folder Actions">
                                                                <button mat-menu-item (click)="openPartagerDialog()">
                                                                    <i class="fa-solid fa-share-nodes icon-size-4 primary-color mr-2"></i>Partager
                                                                </button>
                                                                <button mat-menu-item (click)="openSupprimerDialog()">
                                                                    <i class="fa-solid fa-trash icon-size-4 red-color mr-2"></i>Supprimer
                                                                </button>
                                                                <button mat-menu-item>
                                                                    <i class="fa-solid fa-star icon-size-4 gold-color mr-2"></i>Ajouter
                                                                    aux Favorites
                                                                </button>
                                                                <button mat-menu-item (click)="openProcessusDialog()">
                                                                    <i class="fa-solid fa-code-branch icon-size-4 gray-color mr-2"></i>Proccessus
                                                                </button>
                                                                <button mat-menu-item (click)="openDetacherLiaisonDialog()">
                                                                    <i class="fa-solid fa-unlink icon-size-4 primary-color mr-2"></i>Détacher
                                                                    Liaison
                                                                </button>
                                                                <button mat-menu-item (click)="openBordereauDialog()">
                                                                    <i class="fa-solid fa-print icon-size-4 primary-color mr-2"></i>Bordereau
                                                                </button>

                                                                <button mat-menu-item (click)="openEmailSuivisDialog()">
                                                                    <i class="fa-solid fa-paper-plane icon-size-4 primary-color mr-2"></i>E-mails Suivis
                                                                </button>

                                                                <button mat-menu-item (click)="openDialogUpdate()">
                                                                    <i class="fa-solid fa-pen-to-square icon-size-4 primary-color mr-2"></i>Mofidier
                                                                </button>

                                                            </mat-menu>
                                                        </div>
                                                    </td>
                                                </ng-container>

                                                <!-- Table Rows and Headers -->
                                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                            </table>
                                            <!-- MatPaginator for pagination -->
                                            <!-- <div class="paginator-container flex justify-center items-center mt-2 w-full">
                                                <mat-paginator [length]="results.length" [pageSize]="5"
                                                    [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page">
                                                </mat-paginator>
                                            </div> -->
                                        </div>
                                    </ng-container>
                                </div>
                            </ng-template>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </mat-drawer-content>



        </mat-drawer-container>
    </div>
</ng-template>


